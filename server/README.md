# API Docs

REST API built with Express and better-sqlite3.

# Getting started

Clone or download this repository and follow this guide.

### Prerequisites

-   [Node 8](https://nodejs.org/en/) (with npm)
-   [Yarn](https://yarnpkg.com/lang/en/)

### Usage

Run the following to install **Express** and **better-sqlite3**

```
yarn
```

or if you prefer npm

```
npm install
```

### Run

Run the following to start the server

```
cd server
```

```
yarn start
```

or if you prefer npm

```
npm start
```

An empty database will be generated when server starts.

# Endpoints

The api has the following endpoints to retrieve, insert, delete or update content.

## Getting content

### Get all bookings

```
GET api/booking
```

Response body:

```
{
    "id": 1,
    "guest_id": 1,
    "details_id": 1,
    "num_of_guests": 2,
    "time": "HH:HH",
    "date": "YYYY-MM-DD"
  }
```

### Get booking by ID

```
GET api/booking/bookingId
```

Response body:

```
{
  "id": 1,
  "guest_id": 1,
  "details_id": 1
}
```

### Get all guests

```
GET api/guests
```

Response body:

```
{
    "id": 1,
    "firstname": "Jane",
    "lastname": "Doe",
    "email": "example@mail.com",
    "phone": "000 000 00"
  }
```

## Adding content

### Create a new guest

```
GET api/create-guest
```

You will need to specify firstname, lastname, email and phone. All arguments should be strings to be accepted. id is autogenerated.

Response body:

```
{
  "id": 2,
  "firstname": "John",
  "lastname": "Doe",
  "email": "example@email.com",
  "phone": "000 000 00"
}
```

### Create new details

```
GET api/create-details
```

You will need to specify guest_id and num_of_guests as integers and time and date as strings. id is autogenerated.

Response on request:

```
{
  "id": 1,
  "guest_id": 1,
  "num_of_guests": 2,
  "time": "HH:HH",
  "date": "YYYY-MM-DD"
}
```

### Create a new booking

```
GET api/create-booking
```

You will need to specify a existing guest_id and details_id. id is autogenerated on insert.

Response on request:

```
{
  "id": 1,
  "guest_id": 1,
  "details_id": 1
}
```

## Deleting content

### Delete a booking

```
DELETE api/booking/:bookingId
```

Response to request:

```
Status 204 No Content
```

## Updating content

### Update a booking by ID

```
PUT api/booking/:bookingId
```

Request body:

```
  {
    numOfGuests: INT,
    time: STRING,
    date: STRING
  }
```

Response body:

```
{
    "id": 1,
    "guest_id": 1,
    "details_id": 1,
    "num_of_guests": numOfGuests,
    "time": time,
    "date": date,
    "firstname": "Jane",
    "lastname": "Doe",
    "email": "example@mail.com",
    "phone": "000 000 00"
  }
```
